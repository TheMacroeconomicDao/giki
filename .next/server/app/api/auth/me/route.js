/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/me/route";
exports.ids = ["app/api/auth/me/route"];
exports.modules = {

/***/ "(rsc)/./app/api/auth/me/route.ts":
/*!**********************************!*\
  !*** ./app/api/auth/me/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_jwt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/jwt */ \"(rsc)/./lib/jwt.ts\");\n/* harmony import */ var _lib_user_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/user-service */ \"(rsc)/./lib/user-service.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n\n\n\n\n\nasync function GET(req) {\n    try {\n        // Get the access token from cookies\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n        const accessToken = cookieStore.get(\"access_token\")?.value;\n        if (!accessToken) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Not authenticated\"\n            }, {\n                status: 401\n            });\n        }\n        try {\n            // Verify the access token\n            const payload = await (0,_lib_jwt__WEBPACK_IMPORTED_MODULE_2__.verifyJWT)(accessToken);\n            if (payload.type !== \"access\") {\n                throw new Error(\"Invalid token type\");\n            }\n            // Get the user\n            const user = await (0,_lib_user_service__WEBPACK_IMPORTED_MODULE_3__.getUserById)(payload.sub);\n            if (!user) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"User not found\"\n                }, {\n                    status: 404\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                user: {\n                    id: user.id,\n                    address: user.address,\n                    name: user.name,\n                    email: user.email,\n                    role: user.role,\n                    preferences: user.preferences\n                }\n            });\n        } catch (error) {\n            // If token verification fails, try to refresh the token\n            _lib_logger__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Token verification error:\", error);\n            // Return a specific error code that the client can handle\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Token expired\",\n                code: \"TOKEN_EXPIRED\"\n            }, {\n                status: 401\n            });\n        }\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Auth error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Authentication failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvbWUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBDO0FBQ0o7QUFDZ0I7QUFDTjtBQUNYO0FBRTlCLGVBQWVLLElBQUlDLEdBQVk7SUFDcEMsSUFBSTtRQUNGLG9DQUFvQztRQUNwQyxNQUFNQyxjQUFjTixxREFBT0E7UUFDM0IsTUFBTU8sY0FBY0QsWUFBWUUsR0FBRyxDQUFDLGlCQUFpQkM7UUFFckQsSUFBSSxDQUFDRixhQUFhO1lBQ2hCLE9BQU9SLHFEQUFZQSxDQUFDVyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBb0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3pFO1FBRUEsSUFBSTtZQUNGLDBCQUEwQjtZQUMxQixNQUFNQyxVQUFVLE1BQU1aLG1EQUFTQSxDQUFhTTtZQUU1QyxJQUFJTSxRQUFRQyxJQUFJLEtBQUssVUFBVTtnQkFDN0IsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1lBRUEsZUFBZTtZQUNmLE1BQU1DLE9BQU8sTUFBTWQsOERBQVdBLENBQUNXLFFBQVFJLEdBQUc7WUFFMUMsSUFBSSxDQUFDRCxNQUFNO2dCQUNULE9BQU9qQixxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO29CQUFFQyxPQUFPO2dCQUFpQixHQUFHO29CQUFFQyxRQUFRO2dCQUFJO1lBQ3RFO1lBRUEsT0FBT2IscURBQVlBLENBQUNXLElBQUksQ0FBQztnQkFDdkJNLE1BQU07b0JBQ0pFLElBQUlGLEtBQUtFLEVBQUU7b0JBQ1hDLFNBQVNILEtBQUtHLE9BQU87b0JBQ3JCQyxNQUFNSixLQUFLSSxJQUFJO29CQUNmQyxPQUFPTCxLQUFLSyxLQUFLO29CQUNqQkMsTUFBTU4sS0FBS00sSUFBSTtvQkFDZkMsYUFBYVAsS0FBS08sV0FBVztnQkFDL0I7WUFDRjtRQUNGLEVBQUUsT0FBT1osT0FBTztZQUNkLHdEQUF3RDtZQUN4RFIsK0NBQU1BLENBQUNRLEtBQUssQ0FBQyw2QkFBNkJBO1lBRTFDLDBEQUEwRDtZQUMxRCxPQUFPWixxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO2dCQUFFQyxPQUFPO2dCQUFpQmEsTUFBTTtZQUFnQixHQUFHO2dCQUFFWixRQUFRO1lBQUk7UUFDNUY7SUFDRixFQUFFLE9BQU9ELE9BQU87UUFDZFIsK0NBQU1BLENBQUNRLEtBQUssQ0FBQyxlQUFlQTtRQUM1QixPQUFPWixxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0IsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDN0U7QUFDRiIsInNvdXJjZXMiOlsiL2FwcC9hcHAvYXBpL2F1dGgvbWUvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tIFwibmV4dC9oZWFkZXJzXCJcbmltcG9ydCB7IHZlcmlmeUpXVCwgdHlwZSBKV1RQYXlsb2FkIH0gZnJvbSBcIkAvbGliL2p3dFwiXG5pbXBvcnQgeyBnZXRVc2VyQnlJZCB9IGZyb20gXCJAL2xpYi91c2VyLXNlcnZpY2VcIlxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkAvbGliL2xvZ2dlclwiXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IHRoZSBhY2Nlc3MgdG9rZW4gZnJvbSBjb29raWVzXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKClcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGNvb2tpZVN0b3JlLmdldChcImFjY2Vzc190b2tlblwiKT8udmFsdWVcblxuICAgIGlmICghYWNjZXNzVG9rZW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZnkgdGhlIGFjY2VzcyB0b2tlblxuICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeUpXVDxKV1RQYXlsb2FkPihhY2Nlc3NUb2tlbilcblxuICAgICAgaWYgKHBheWxvYWQudHlwZSAhPT0gXCJhY2Nlc3NcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRva2VuIHR5cGVcIilcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSB1c2VyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5SWQocGF5bG9hZC5zdWIpXG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVc2VyIG5vdCBmb3VuZFwiIH0sIHsgc3RhdHVzOiA0MDQgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGFkZHJlc3M6IHVzZXIuYWRkcmVzcyxcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICAgIHByZWZlcmVuY2VzOiB1c2VyLnByZWZlcmVuY2VzLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gSWYgdG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxzLCB0cnkgdG8gcmVmcmVzaCB0aGUgdG9rZW5cbiAgICAgIGxvZ2dlci5lcnJvcihcIlRva2VuIHZlcmlmaWNhdGlvbiBlcnJvcjpcIiwgZXJyb3IpXG5cbiAgICAgIC8vIFJldHVybiBhIHNwZWNpZmljIGVycm9yIGNvZGUgdGhhdCB0aGUgY2xpZW50IGNhbiBoYW5kbGVcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlRva2VuIGV4cGlyZWRcIiwgY29kZTogXCJUT0tFTl9FWFBJUkVEXCIgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoXCJBdXRoIGVycm9yOlwiLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJBdXRoZW50aWNhdGlvbiBmYWlsZWRcIiB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjb29raWVzIiwidmVyaWZ5SldUIiwiZ2V0VXNlckJ5SWQiLCJsb2dnZXIiLCJHRVQiLCJyZXEiLCJjb29raWVTdG9yZSIsImFjY2Vzc1Rva2VuIiwiZ2V0IiwidmFsdWUiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJwYXlsb2FkIiwidHlwZSIsIkVycm9yIiwidXNlciIsInN1YiIsImlkIiwiYWRkcmVzcyIsIm5hbWUiLCJlbWFpbCIsInJvbGUiLCJwcmVmZXJlbmNlcyIsImNvZGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/me/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   queryOne: () => (/* binding */ queryOne),\n/* harmony export */   sql: () => (/* binding */ sql),\n/* harmony export */   transaction: () => (/* binding */ transaction)\n/* harmony export */ });\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/.pnpm/@neondatabase+serverless@1.0.0/node_modules/@neondatabase/serverless/index.mjs\");\n\n// Get the database URL from the environment variables\n// The environment variable name might be different depending on the Neon integration\nconst DATABASE_URL = process.env.DATABASE_URL || process.env.POSTGRES_URL || process.env.napi_hztr00ng5ch5vr8vr5d14o9u92tp9h926snonjqxd5uem7z7cwfxtizavqplr85k;\n// Initialize the SQL client with the Neon connection string\nconst sql = (0,_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.neon)(DATABASE_URL);\n// Helper function for raw SQL queries\nasync function query(queryText, params = []) {\n    try {\n        // Use sql.query for conventional function calls with placeholders\n        return await sql.query(queryText, params);\n    } catch (error) {\n        console.error(\"Database query error:\", error);\n        throw error;\n    }\n}\n// Helper function for single-row queries\nasync function queryOne(queryText, params = []) {\n    try {\n        const result = await sql.query(queryText, params);\n        return result.length > 0 ? result[0] : null;\n    } catch (error) {\n        console.error(\"Database query error:\", error);\n        throw error;\n    }\n}\n// Helper function for executing transactions\nasync function transaction(callback) {\n    try {\n        // Note: Neon's serverless driver doesn't support transactions in the same way as a traditional client\n        // For now, we'll just execute the callback with the sql client\n        return await callback(sql);\n    } catch (error) {\n        console.error(\"Transaction error:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0M7QUFFL0Msc0RBQXNEO0FBQ3RELHFGQUFxRjtBQUNyRixNQUFNQyxlQUNKQyxRQUFRQyxHQUFHLENBQUNGLFlBQVksSUFDeEJDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxJQUN4QkYsUUFBUUMsR0FBRyxDQUFDRSxxRUFBcUU7QUFFbkYsNERBQTREO0FBQ3JELE1BQU1DLE1BQU1OLDhEQUFJQSxDQUFDQyxjQUFjO0FBRXRDLHNDQUFzQztBQUMvQixlQUFlTSxNQUFlQyxTQUFpQixFQUFFQyxTQUFnQixFQUFFO0lBQ3hFLElBQUk7UUFDRixrRUFBa0U7UUFDbEUsT0FBUSxNQUFNSCxJQUFJQyxLQUFLLENBQUNDLFdBQVdDO0lBQ3JDLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMseUJBQXlCQTtRQUN2QyxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSx5Q0FBeUM7QUFDbEMsZUFBZUUsU0FBa0JKLFNBQWlCLEVBQUVDLFNBQWdCLEVBQUU7SUFDM0UsSUFBSTtRQUNGLE1BQU1JLFNBQVUsTUFBTVAsSUFBSUMsS0FBSyxDQUFDQyxXQUFXQztRQUMzQyxPQUFPSSxPQUFPQyxNQUFNLEdBQUcsSUFBSUQsTUFBTSxDQUFDLEVBQUUsR0FBRztJQUN6QyxFQUFFLE9BQU9ILE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsTUFBTUE7SUFDUjtBQUNGO0FBRUEsNkNBQTZDO0FBQ3RDLGVBQWVLLFlBQXFCQyxRQUFxQztJQUM5RSxJQUFJO1FBQ0Ysc0dBQXNHO1FBQ3RHLCtEQUErRDtRQUMvRCxPQUFPLE1BQU1BLFNBQVNWO0lBQ3hCLEVBQUUsT0FBT0ksT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxNQUFNQTtJQUNSO0FBQ0YiLCJzb3VyY2VzIjpbIi9hcHAvbGliL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG5lb24gfSBmcm9tIFwiQG5lb25kYXRhYmFzZS9zZXJ2ZXJsZXNzXCJcblxuLy8gR2V0IHRoZSBkYXRhYmFzZSBVUkwgZnJvbSB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4vLyBUaGUgZW52aXJvbm1lbnQgdmFyaWFibGUgbmFtZSBtaWdodCBiZSBkaWZmZXJlbnQgZGVwZW5kaW5nIG9uIHRoZSBOZW9uIGludGVncmF0aW9uXG5jb25zdCBEQVRBQkFTRV9VUkwgPVxuICBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwgfHxcbiAgcHJvY2Vzcy5lbnYuUE9TVEdSRVNfVVJMIHx8XG4gIHByb2Nlc3MuZW52Lm5hcGlfaHp0cjAwbmc1Y2g1dnI4dnI1ZDE0bzl1OTJ0cDloOTI2c25vbmpxeGQ1dWVtN3o3Y3dmeHRpemF2cXBscjg1a1xuXG4vLyBJbml0aWFsaXplIHRoZSBTUUwgY2xpZW50IHdpdGggdGhlIE5lb24gY29ubmVjdGlvbiBzdHJpbmdcbmV4cG9ydCBjb25zdCBzcWwgPSBuZW9uKERBVEFCQVNFX1VSTCEpXG5cbi8vIEhlbHBlciBmdW5jdGlvbiBmb3IgcmF3IFNRTCBxdWVyaWVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnk8VCA9IGFueT4ocXVlcnlUZXh0OiBzdHJpbmcsIHBhcmFtczogYW55W10gPSBbXSk6IFByb21pc2U8VFtdPiB7XG4gIHRyeSB7XG4gICAgLy8gVXNlIHNxbC5xdWVyeSBmb3IgY29udmVudGlvbmFsIGZ1bmN0aW9uIGNhbGxzIHdpdGggcGxhY2Vob2xkZXJzXG4gICAgcmV0dXJuIChhd2FpdCBzcWwucXVlcnkocXVlcnlUZXh0LCBwYXJhbXMpKSBhcyBUW11cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgcXVlcnkgZXJyb3I6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIGZvciBzaW5nbGUtcm93IHF1ZXJpZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeU9uZTxUID0gYW55PihxdWVyeVRleHQ6IHN0cmluZywgcGFyYW1zOiBhbnlbXSA9IFtdKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCBzcWwucXVlcnkocXVlcnlUZXh0LCBwYXJhbXMpKSBhcyBUW11cbiAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDAgPyByZXN1bHRbMF0gOiBudWxsXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIHF1ZXJ5IGVycm9yOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiBmb3IgZXhlY3V0aW5nIHRyYW5zYWN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRyYW5zYWN0aW9uPFQgPSBhbnk+KGNhbGxiYWNrOiAoY2xpZW50OiBhbnkpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcbiAgdHJ5IHtcbiAgICAvLyBOb3RlOiBOZW9uJ3Mgc2VydmVybGVzcyBkcml2ZXIgZG9lc24ndCBzdXBwb3J0IHRyYW5zYWN0aW9ucyBpbiB0aGUgc2FtZSB3YXkgYXMgYSB0cmFkaXRpb25hbCBjbGllbnRcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IGV4ZWN1dGUgdGhlIGNhbGxiYWNrIHdpdGggdGhlIHNxbCBjbGllbnRcbiAgICByZXR1cm4gYXdhaXQgY2FsbGJhY2soc3FsKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJUcmFuc2FjdGlvbiBlcnJvcjpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuIl0sIm5hbWVzIjpbIm5lb24iLCJEQVRBQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiUE9TVEdSRVNfVVJMIiwibmFwaV9oenRyMDBuZzVjaDV2cjh2cjVkMTRvOXU5MnRwOWg5MjZzbm9uanF4ZDV1ZW03ejdjd2Z4dGl6YXZxcGxyODVrIiwic3FsIiwicXVlcnkiLCJxdWVyeVRleHQiLCJwYXJhbXMiLCJlcnJvciIsImNvbnNvbGUiLCJxdWVyeU9uZSIsInJlc3VsdCIsImxlbmd0aCIsInRyYW5zYWN0aW9uIiwiY2FsbGJhY2siXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/jwt.ts":
/*!********************!*\
  !*** ./lib/jwt.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccessToken: () => (/* binding */ createAccessToken),\n/* harmony export */   createRefreshToken: () => (/* binding */ createRefreshToken),\n/* harmony export */   getSecureCookieOptions: () => (/* binding */ getSecureCookieOptions),\n/* harmony export */   signJWT: () => (/* binding */ signJWT),\n/* harmony export */   verifyJWT: () => (/* binding */ verifyJWT)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.0.11/node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.0.11/node_modules/jose/dist/webapi/jwt/verify.js\");\n\n// Secret key for JWT signing and verification\n// In production, use a proper secret from environment variables\nconst JWT_SECRET = new TextEncoder().encode(process.env.JWT_SECRET || \"your-secret-key-here-minimum-32-characters-long\");\n// Token expiration times\nconst ACCESS_TOKEN_EXPIRES_IN = \"15m\" // 15 minutes\n;\nconst REFRESH_TOKEN_EXPIRES_IN = \"7d\" // 7 days\n;\n/**\n * Sign a JWT token\n */ async function signJWT(payload, expiresIn = ACCESS_TOKEN_EXPIRES_IN) {\n    const iat = Math.floor(Date.now() / 1000) // Current time in seconds\n    ;\n    const token = await new jose__WEBPACK_IMPORTED_MODULE_0__.SignJWT({\n        ...payload\n    }).setProtectedHeader({\n        alg: \"HS256\"\n    }).setIssuedAt().setExpirationTime(expiresIn).sign(JWT_SECRET);\n    return token;\n}\n/**\n * Verify a JWT token\n */ async function verifyJWT(token) {\n    try {\n        // Add clock tolerance to handle slight time differences\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_1__.jwtVerify)(token, JWT_SECRET, {\n            clockTolerance: 120\n        });\n        return payload;\n    } catch (error) {\n        console.error(\"JWT verification failed:\", error);\n        throw new Error(\"Invalid token\");\n    }\n}\n/**\n * Create an access token\n */ async function createAccessToken(payload) {\n    return signJWT({\n        ...payload,\n        type: \"access\"\n    }, ACCESS_TOKEN_EXPIRES_IN);\n}\n/**\n * Create a refresh token\n */ async function createRefreshToken(payload) {\n    // Add a unique JWT ID for this refresh token\n    const jti = crypto.randomUUID();\n    return signJWT({\n        ...payload,\n        type: \"refresh\",\n        jti\n    }, REFRESH_TOKEN_EXPIRES_IN);\n}\n/**\n * Set secure cookie options\n */ function getSecureCookieOptions(maxAge) {\n    return {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"strict\",\n        path: \"/\",\n        maxAge\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvand0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBeUM7QUFFekMsOENBQThDO0FBQzlDLGdFQUFnRTtBQUNoRSxNQUFNRSxhQUFhLElBQUlDLGNBQWNDLE1BQU0sQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDSixVQUFVLElBQUk7QUFFdEUseUJBQXlCO0FBQ3pCLE1BQU1LLDBCQUEwQixNQUFNLGFBQWE7O0FBQ25ELE1BQU1DLDJCQUEyQixLQUFLLFNBQVM7O0FBVS9DOztDQUVDLEdBQ00sZUFBZUMsUUFBUUMsT0FBbUIsRUFBRUMsWUFBb0JKLHVCQUF1QjtJQUM1RixNQUFNSyxNQUFNQyxLQUFLQyxLQUFLLENBQUNDLEtBQUtDLEdBQUcsS0FBSyxNQUFNLDBCQUEwQjs7SUFFcEUsTUFBTUMsUUFBUSxNQUFNLElBQUloQix5Q0FBT0EsQ0FBQztRQUFFLEdBQUdTLE9BQU87SUFBQyxHQUMxQ1Esa0JBQWtCLENBQUM7UUFBRUMsS0FBSztJQUFRLEdBQ2xDQyxXQUFXLEdBQ1hDLGlCQUFpQixDQUFDVixXQUNsQlcsSUFBSSxDQUFDcEI7SUFFUixPQUFPZTtBQUNUO0FBRUE7O0NBRUMsR0FDTSxlQUFlTSxVQUFhTixLQUFhO0lBQzlDLElBQUk7UUFDRix3REFBd0Q7UUFDeEQsTUFBTSxFQUFFUCxPQUFPLEVBQUUsR0FBRyxNQUFNViwrQ0FBU0EsQ0FBQ2lCLE9BQU9mLFlBQVk7WUFDckRzQixnQkFBZ0I7UUFDbEI7UUFDQSxPQUFPZDtJQUNULEVBQUUsT0FBT2UsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxNQUFNLElBQUlFLE1BQU07SUFDbEI7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZUMsa0JBQWtCbEIsT0FBaUM7SUFDdkUsT0FBT0QsUUFBUTtRQUFFLEdBQUdDLE9BQU87UUFBRW1CLE1BQU07SUFBUyxHQUFHdEI7QUFDakQ7QUFFQTs7Q0FFQyxHQUNNLGVBQWV1QixtQkFBbUJwQixPQUFpQztJQUN4RSw2Q0FBNkM7SUFDN0MsTUFBTXFCLE1BQU1DLE9BQU9DLFVBQVU7SUFDN0IsT0FBT3hCLFFBQVE7UUFBRSxHQUFHQyxPQUFPO1FBQUVtQixNQUFNO1FBQVdFO0lBQUksR0FBR3ZCO0FBQ3ZEO0FBRUE7O0NBRUMsR0FDTSxTQUFTMEIsdUJBQXVCQyxNQUFjO0lBQ25ELE9BQU87UUFDTEMsVUFBVTtRQUNWQyxRQUFRaEMsa0JBQXlCO1FBQ2pDaUMsVUFBVTtRQUNWQyxNQUFNO1FBQ05KO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL2FwcC9saWIvand0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGp3dFZlcmlmeSwgU2lnbkpXVCB9IGZyb20gXCJqb3NlXCJcblxuLy8gU2VjcmV0IGtleSBmb3IgSldUIHNpZ25pbmcgYW5kIHZlcmlmaWNhdGlvblxuLy8gSW4gcHJvZHVjdGlvbiwgdXNlIGEgcHJvcGVyIHNlY3JldCBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3QgSldUX1NFQ1JFVCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8IFwieW91ci1zZWNyZXQta2V5LWhlcmUtbWluaW11bS0zMi1jaGFyYWN0ZXJzLWxvbmdcIilcblxuLy8gVG9rZW4gZXhwaXJhdGlvbiB0aW1lc1xuY29uc3QgQUNDRVNTX1RPS0VOX0VYUElSRVNfSU4gPSBcIjE1bVwiIC8vIDE1IG1pbnV0ZXNcbmNvbnN0IFJFRlJFU0hfVE9LRU5fRVhQSVJFU19JTiA9IFwiN2RcIiAvLyA3IGRheXNcblxuZXhwb3J0IGludGVyZmFjZSBKV1RQYXlsb2FkIHtcbiAgc3ViOiBzdHJpbmcgLy8gVXNlciBJRFxuICBhZGRyZXNzOiBzdHJpbmcgLy8gV2FsbGV0IGFkZHJlc3NcbiAgcm9sZTogc3RyaW5nIC8vIFVzZXIgcm9sZVxuICBqdGk/OiBzdHJpbmcgLy8gSldUIElEIChmb3IgcmVmcmVzaCB0b2tlbnMpXG4gIHR5cGU/OiBcImFjY2Vzc1wiIHwgXCJyZWZyZXNoXCIgLy8gVG9rZW4gdHlwZVxufVxuXG4vKipcbiAqIFNpZ24gYSBKV1QgdG9rZW5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25KV1QocGF5bG9hZDogSldUUGF5bG9hZCwgZXhwaXJlc0luOiBzdHJpbmcgPSBBQ0NFU1NfVE9LRU5fRVhQSVJFU19JTik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGlhdCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApIC8vIEN1cnJlbnQgdGltZSBpbiBzZWNvbmRzXG5cbiAgY29uc3QgdG9rZW4gPSBhd2FpdCBuZXcgU2lnbkpXVCh7IC4uLnBheWxvYWQgfSlcbiAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHsgYWxnOiBcIkhTMjU2XCIgfSlcbiAgICAuc2V0SXNzdWVkQXQoKVxuICAgIC5zZXRFeHBpcmF0aW9uVGltZShleHBpcmVzSW4pXG4gICAgLnNpZ24oSldUX1NFQ1JFVClcblxuICByZXR1cm4gdG9rZW5cbn1cblxuLyoqXG4gKiBWZXJpZnkgYSBKV1QgdG9rZW5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeUpXVDxUPih0b2tlbjogc3RyaW5nKTogUHJvbWlzZTxUPiB7XG4gIHRyeSB7XG4gICAgLy8gQWRkIGNsb2NrIHRvbGVyYW5jZSB0byBoYW5kbGUgc2xpZ2h0IHRpbWUgZGlmZmVyZW5jZXNcbiAgICBjb25zdCB7IHBheWxvYWQgfSA9IGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCwge1xuICAgICAgY2xvY2tUb2xlcmFuY2U6IDEyMCwgLy8gSW5jcmVhc2UgdG8gMTIwIHNlY29uZHMgb2YgY2xvY2sgdG9sZXJhbmNlIGZvciBzZXJ2ZXIgdGltZSBkaWZmZXJlbmNlc1xuICAgIH0pXG4gICAgcmV0dXJuIHBheWxvYWQgYXMgdW5rbm93biBhcyBUXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkpXVCB2ZXJpZmljYXRpb24gZmFpbGVkOlwiLCBlcnJvcilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRva2VuXCIpXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gYWNjZXNzIHRva2VuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2Nlc3NUb2tlbihwYXlsb2FkOiBPbWl0PEpXVFBheWxvYWQsIFwidHlwZVwiPik6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBzaWduSldUKHsgLi4ucGF5bG9hZCwgdHlwZTogXCJhY2Nlc3NcIiB9LCBBQ0NFU1NfVE9LRU5fRVhQSVJFU19JTilcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSByZWZyZXNoIHRva2VuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVSZWZyZXNoVG9rZW4ocGF5bG9hZDogT21pdDxKV1RQYXlsb2FkLCBcInR5cGVcIj4pOiBQcm9taXNlPHN0cmluZz4ge1xuICAvLyBBZGQgYSB1bmlxdWUgSldUIElEIGZvciB0aGlzIHJlZnJlc2ggdG9rZW5cbiAgY29uc3QganRpID0gY3J5cHRvLnJhbmRvbVVVSUQoKVxuICByZXR1cm4gc2lnbkpXVCh7IC4uLnBheWxvYWQsIHR5cGU6IFwicmVmcmVzaFwiLCBqdGkgfSwgUkVGUkVTSF9UT0tFTl9FWFBJUkVTX0lOKVxufVxuXG4vKipcbiAqIFNldCBzZWN1cmUgY29va2llIG9wdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlY3VyZUNvb2tpZU9wdGlvbnMobWF4QWdlOiBudW1iZXIpIHtcbiAgcmV0dXJuIHtcbiAgICBodHRwT25seTogdHJ1ZSxcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIixcbiAgICBzYW1lU2l0ZTogXCJzdHJpY3RcIiBhcyBjb25zdCxcbiAgICBwYXRoOiBcIi9cIixcbiAgICBtYXhBZ2UsXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJqd3RWZXJpZnkiLCJTaWduSldUIiwiSldUX1NFQ1JFVCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwicHJvY2VzcyIsImVudiIsIkFDQ0VTU19UT0tFTl9FWFBJUkVTX0lOIiwiUkVGUkVTSF9UT0tFTl9FWFBJUkVTX0lOIiwic2lnbkpXVCIsInBheWxvYWQiLCJleHBpcmVzSW4iLCJpYXQiLCJNYXRoIiwiZmxvb3IiLCJEYXRlIiwibm93IiwidG9rZW4iLCJzZXRQcm90ZWN0ZWRIZWFkZXIiLCJhbGciLCJzZXRJc3N1ZWRBdCIsInNldEV4cGlyYXRpb25UaW1lIiwic2lnbiIsInZlcmlmeUpXVCIsImNsb2NrVG9sZXJhbmNlIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJjcmVhdGVBY2Nlc3NUb2tlbiIsInR5cGUiLCJjcmVhdGVSZWZyZXNoVG9rZW4iLCJqdGkiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwiZ2V0U2VjdXJlQ29va2llT3B0aW9ucyIsIm1heEFnZSIsImh0dHBPbmx5Iiwic2VjdXJlIiwic2FtZVNpdGUiLCJwYXRoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/jwt.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logger.ts":
/*!***********************!*\
  !*** ./lib/logger.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n// Simple logger for production use\n// In a real app, you might want to use a more robust logging solution\nclass Logger {\n    constructor(){\n        this.logLevels = {\n            debug: 0,\n            info: 1,\n            warn: 2,\n            error: 3\n        };\n        this.isProduction = \"development\" === \"production\";\n        this.minLevel = this.isProduction ? \"info\" : \"debug\";\n    }\n    shouldLog(level) {\n        return this.logLevels[level] >= this.logLevels[this.minLevel];\n    }\n    formatMessage(message, options) {\n        const timestamp = new Date().toISOString();\n        const level = options?.level || \"info\";\n        const context = options?.context ? `[${options.context}]` : \"\";\n        return `${timestamp} ${level.toUpperCase()} ${context} ${message}`;\n    }\n    debug(message, options) {\n        if (!this.shouldLog(\"debug\")) return;\n        const formattedMessage = this.formatMessage(message, {\n            ...options,\n            level: \"debug\"\n        });\n        console.debug(formattedMessage, options?.data || \"\");\n    }\n    info(message, options) {\n        if (!this.shouldLog(\"info\")) return;\n        const formattedMessage = this.formatMessage(message, {\n            ...options,\n            level: \"info\"\n        });\n        console.info(formattedMessage, options?.data || \"\");\n    }\n    warn(message, options) {\n        if (!this.shouldLog(\"warn\")) return;\n        const formattedMessage = this.formatMessage(message, {\n            ...options,\n            level: \"warn\"\n        });\n        console.warn(formattedMessage, options?.data || \"\");\n    }\n    error(message, error, options) {\n        if (!this.shouldLog(\"error\")) return;\n        const formattedMessage = this.formatMessage(message, {\n            ...options,\n            level: \"error\"\n        });\n        console.error(formattedMessage, error || \"\", options?.data || \"\");\n    }\n}\nconst logger = new Logger();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxtQ0FBbUM7QUFDbkMsc0VBQXNFO0FBVXRFLE1BQU1BO0lBVUpDLGFBQWM7YUFSTkMsWUFBc0M7WUFDNUNDLE9BQU87WUFDUEMsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLE9BQU87UUFDVDtRQUlFLElBQUksQ0FBQ0MsWUFBWSxHQUFHQyxrQkFBeUI7UUFDN0MsSUFBSSxDQUFDQyxRQUFRLEdBQUcsSUFBSSxDQUFDRixZQUFZLEdBQUcsU0FBUztJQUMvQztJQUVRRyxVQUFVQyxLQUFlLEVBQVc7UUFDMUMsT0FBTyxJQUFJLENBQUNULFNBQVMsQ0FBQ1MsTUFBTSxJQUFJLElBQUksQ0FBQ1QsU0FBUyxDQUFDLElBQUksQ0FBQ08sUUFBUSxDQUFDO0lBQy9EO0lBRVFHLGNBQWNDLE9BQWUsRUFBRUMsT0FBb0IsRUFBVTtRQUNuRSxNQUFNQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7UUFDeEMsTUFBTU4sUUFBUUcsU0FBU0gsU0FBUztRQUNoQyxNQUFNTyxVQUFVSixTQUFTSSxVQUFVLENBQUMsQ0FBQyxFQUFFSixRQUFRSSxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUc7UUFDNUQsT0FBTyxHQUFHSCxVQUFVLENBQUMsRUFBRUosTUFBTVEsV0FBVyxHQUFHLENBQUMsRUFBRUQsUUFBUSxDQUFDLEVBQUVMLFNBQVM7SUFDcEU7SUFFQVYsTUFBTVUsT0FBZSxFQUFFQyxPQUFtQyxFQUFRO1FBQ2hFLElBQUksQ0FBQyxJQUFJLENBQUNKLFNBQVMsQ0FBQyxVQUFVO1FBQzlCLE1BQU1VLG1CQUFtQixJQUFJLENBQUNSLGFBQWEsQ0FBQ0MsU0FBUztZQUFFLEdBQUdDLE9BQU87WUFBRUgsT0FBTztRQUFRO1FBQ2xGVSxRQUFRbEIsS0FBSyxDQUFDaUIsa0JBQWtCTixTQUFTUSxRQUFRO0lBQ25EO0lBRUFsQixLQUFLUyxPQUFlLEVBQUVDLE9BQW1DLEVBQVE7UUFDL0QsSUFBSSxDQUFDLElBQUksQ0FBQ0osU0FBUyxDQUFDLFNBQVM7UUFDN0IsTUFBTVUsbUJBQW1CLElBQUksQ0FBQ1IsYUFBYSxDQUFDQyxTQUFTO1lBQUUsR0FBR0MsT0FBTztZQUFFSCxPQUFPO1FBQU87UUFDakZVLFFBQVFqQixJQUFJLENBQUNnQixrQkFBa0JOLFNBQVNRLFFBQVE7SUFDbEQ7SUFFQWpCLEtBQUtRLE9BQWUsRUFBRUMsT0FBbUMsRUFBUTtRQUMvRCxJQUFJLENBQUMsSUFBSSxDQUFDSixTQUFTLENBQUMsU0FBUztRQUM3QixNQUFNVSxtQkFBbUIsSUFBSSxDQUFDUixhQUFhLENBQUNDLFNBQVM7WUFBRSxHQUFHQyxPQUFPO1lBQUVILE9BQU87UUFBTztRQUNqRlUsUUFBUWhCLElBQUksQ0FBQ2Usa0JBQWtCTixTQUFTUSxRQUFRO0lBQ2xEO0lBRUFoQixNQUFNTyxPQUFlLEVBQUVQLEtBQWEsRUFBRVEsT0FBbUMsRUFBUTtRQUMvRSxJQUFJLENBQUMsSUFBSSxDQUFDSixTQUFTLENBQUMsVUFBVTtRQUM5QixNQUFNVSxtQkFBbUIsSUFBSSxDQUFDUixhQUFhLENBQUNDLFNBQVM7WUFBRSxHQUFHQyxPQUFPO1lBQUVILE9BQU87UUFBUTtRQUNsRlUsUUFBUWYsS0FBSyxDQUFDYyxrQkFBa0JkLFNBQVMsSUFBSVEsU0FBU1EsUUFBUTtJQUNoRTtBQUNGO0FBRU8sTUFBTUMsU0FBUyxJQUFJdkIsU0FBUSIsInNvdXJjZXMiOlsiL2FwcC9saWIvbG9nZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNpbXBsZSBsb2dnZXIgZm9yIHByb2R1Y3Rpb24gdXNlXG4vLyBJbiBhIHJlYWwgYXBwLCB5b3UgbWlnaHQgd2FudCB0byB1c2UgYSBtb3JlIHJvYnVzdCBsb2dnaW5nIHNvbHV0aW9uXG5cbnR5cGUgTG9nTGV2ZWwgPSBcImRlYnVnXCIgfCBcImluZm9cIiB8IFwid2FyblwiIHwgXCJlcnJvclwiXG5cbmludGVyZmFjZSBMb2dPcHRpb25zIHtcbiAgbGV2ZWw/OiBMb2dMZXZlbFxuICBjb250ZXh0Pzogc3RyaW5nXG4gIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG59XG5cbmNsYXNzIExvZ2dlciB7XG4gIHByaXZhdGUgaXNQcm9kdWN0aW9uOiBib29sZWFuXG4gIHByaXZhdGUgbG9nTGV2ZWxzOiBSZWNvcmQ8TG9nTGV2ZWwsIG51bWJlcj4gPSB7XG4gICAgZGVidWc6IDAsXG4gICAgaW5mbzogMSxcbiAgICB3YXJuOiAyLFxuICAgIGVycm9yOiAzLFxuICB9XG4gIHByaXZhdGUgbWluTGV2ZWw6IExvZ0xldmVsXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCJcbiAgICB0aGlzLm1pbkxldmVsID0gdGhpcy5pc1Byb2R1Y3Rpb24gPyBcImluZm9cIiA6IFwiZGVidWdcIlxuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRMb2cobGV2ZWw6IExvZ0xldmVsKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubG9nTGV2ZWxzW2xldmVsXSA+PSB0aGlzLmxvZ0xldmVsc1t0aGlzLm1pbkxldmVsXVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZywgb3B0aW9ucz86IExvZ09wdGlvbnMpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIGNvbnN0IGxldmVsID0gb3B0aW9ucz8ubGV2ZWwgfHwgXCJpbmZvXCJcbiAgICBjb25zdCBjb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/IGBbJHtvcHRpb25zLmNvbnRleHR9XWAgOiBcIlwiXG4gICAgcmV0dXJuIGAke3RpbWVzdGFtcH0gJHtsZXZlbC50b1VwcGVyQ2FzZSgpfSAke2NvbnRleHR9ICR7bWVzc2FnZX1gXG4gIH1cblxuICBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcsIG9wdGlvbnM/OiBPbWl0PExvZ09wdGlvbnMsIFwibGV2ZWxcIj4pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc2hvdWxkTG9nKFwiZGVidWdcIikpIHJldHVyblxuICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2UgPSB0aGlzLmZvcm1hdE1lc3NhZ2UobWVzc2FnZSwgeyAuLi5vcHRpb25zLCBsZXZlbDogXCJkZWJ1Z1wiIH0pXG4gICAgY29uc29sZS5kZWJ1Zyhmb3JtYXR0ZWRNZXNzYWdlLCBvcHRpb25zPy5kYXRhIHx8IFwiXCIpXG4gIH1cblxuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgb3B0aW9ucz86IE9taXQ8TG9nT3B0aW9ucywgXCJsZXZlbFwiPik6IHZvaWQge1xuICAgIGlmICghdGhpcy5zaG91bGRMb2coXCJpbmZvXCIpKSByZXR1cm5cbiAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlID0gdGhpcy5mb3JtYXRNZXNzYWdlKG1lc3NhZ2UsIHsgLi4ub3B0aW9ucywgbGV2ZWw6IFwiaW5mb1wiIH0pXG4gICAgY29uc29sZS5pbmZvKGZvcm1hdHRlZE1lc3NhZ2UsIG9wdGlvbnM/LmRhdGEgfHwgXCJcIilcbiAgfVxuXG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBvcHRpb25zPzogT21pdDxMb2dPcHRpb25zLCBcImxldmVsXCI+KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnNob3VsZExvZyhcIndhcm5cIikpIHJldHVyblxuICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2UgPSB0aGlzLmZvcm1hdE1lc3NhZ2UobWVzc2FnZSwgeyAuLi5vcHRpb25zLCBsZXZlbDogXCJ3YXJuXCIgfSlcbiAgICBjb25zb2xlLndhcm4oZm9ybWF0dGVkTWVzc2FnZSwgb3B0aW9ucz8uZGF0YSB8fCBcIlwiKVxuICB9XG5cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yLCBvcHRpb25zPzogT21pdDxMb2dPcHRpb25zLCBcImxldmVsXCI+KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnNob3VsZExvZyhcImVycm9yXCIpKSByZXR1cm5cbiAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlID0gdGhpcy5mb3JtYXRNZXNzYWdlKG1lc3NhZ2UsIHsgLi4ub3B0aW9ucywgbGV2ZWw6IFwiZXJyb3JcIiB9KVxuICAgIGNvbnNvbGUuZXJyb3IoZm9ybWF0dGVkTWVzc2FnZSwgZXJyb3IgfHwgXCJcIiwgb3B0aW9ucz8uZGF0YSB8fCBcIlwiKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKClcbiJdLCJuYW1lcyI6WyJMb2dnZXIiLCJjb25zdHJ1Y3RvciIsImxvZ0xldmVscyIsImRlYnVnIiwiaW5mbyIsIndhcm4iLCJlcnJvciIsImlzUHJvZHVjdGlvbiIsInByb2Nlc3MiLCJtaW5MZXZlbCIsInNob3VsZExvZyIsImxldmVsIiwiZm9ybWF0TWVzc2FnZSIsIm1lc3NhZ2UiLCJvcHRpb25zIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY29udGV4dCIsInRvVXBwZXJDYXNlIiwiZm9ybWF0dGVkTWVzc2FnZSIsImNvbnNvbGUiLCJkYXRhIiwibG9nZ2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/user-service.ts":
/*!*****************************!*\
  !*** ./lib/user-service.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   getUserByAddress: () => (/* binding */ getUserByAddress),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   listUsers: () => (/* binding */ listUsers),\n/* harmony export */   updateLastLogin: () => (/* binding */ updateLastLogin),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n\n\n// Mock users for fallback when database is not available\nconst mockUsers = {\n    \"1\": {\n        id: \"1\",\n        address: \"0x8ba1f109551bD432803012645Ac136ddd64DBA72\",\n        name: \"Admin User\",\n        email: \"admin@giki.js\",\n        role: \"admin\",\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        last_login: new Date().toISOString(),\n        avatarUrl: null,\n        preferences: {\n            language: \"en\",\n            theme: \"system\",\n            email_notifications: true\n        }\n    }\n};\nasync function getUserById(id) {\n    try {\n        const user = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.queryOne)(`\n      SELECT u.*, \n             p.language, \n             p.theme, \n             p.email_notifications,\n             p.avatar_url\n      FROM users u\n      LEFT JOIN user_preferences p ON u.id = p.user_id\n      WHERE u.id = $1\n    `, [\n            id\n        ]);\n        if (!user) {\n            // Fallback to mock data if database query fails or user not found\n            if (mockUsers[id]) {\n                return mockUsers[id];\n            }\n            return null;\n        }\n        // Format the user object with preferences\n        return {\n            ...user,\n            avatarUrl: user.avatar_url || null,\n            preferences: {\n                language: user.language || \"en\",\n                theme: user.theme || \"system\",\n                email_notifications: user.email_notifications !== false,\n                avatar_url: user.avatar_url || null\n            }\n        };\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error getting user by ID:\", error);\n        // Fallback to mock data if database query fails\n        if (mockUsers[id]) {\n            return mockUsers[id];\n        }\n        return null;\n    }\n}\nasync function getUserByAddress(address) {\n    try {\n        const user = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.queryOne)(`\n      SELECT u.*, \n             p.language, \n             p.theme, \n             p.email_notifications,\n             p.avatar_url\n      FROM users u\n      LEFT JOIN user_preferences p ON u.id = p.user_id\n      WHERE LOWER(u.address) = LOWER($1)\n    `, [\n            address\n        ]);\n        if (!user) return null;\n        // Format the user object with preferences\n        return {\n            ...user,\n            avatarUrl: user.avatar_url || null,\n            preferences: {\n                language: user.language || \"en\",\n                theme: user.theme || \"system\",\n                email_notifications: user.email_notifications !== false,\n                avatar_url: user.avatar_url || null\n            }\n        };\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error getting user by address:\", error);\n        return null;\n    }\n}\nasync function createUser(userData) {\n    try {\n        // Insert the user\n        const user = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.queryOne)(`\n      INSERT INTO users (address, name, email, role)\n      VALUES ($1, $2, $3, $4)\n      RETURNING *\n    `, [\n            userData.address,\n            userData.name || null,\n            userData.email || null,\n            userData.role || \"viewer\"\n        ]);\n        if (!user) return null;\n        // Create default preferences\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n      INSERT INTO user_preferences (user_id, language, theme, email_notifications)\n      VALUES ($1, $2, $3, $4)\n    `, [\n            user.id,\n            \"en\",\n            \"system\",\n            true\n        ]);\n        // Get the complete user with preferences\n        return getUserById(user.id);\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error creating user:\", error);\n        return null;\n    }\n}\n// Update the updateUser function to handle avatarUrl\nasync function updateUser(id, data) {\n    try {\n        // Update user data\n        if (data.name !== undefined || data.email !== undefined || data.role !== undefined) {\n            const fields = [];\n            const values = [];\n            let paramIndex = 1;\n            if (data.name !== undefined) {\n                fields.push(`name = $${paramIndex}`);\n                values.push(data.name);\n                paramIndex++;\n            }\n            if (data.email !== undefined) {\n                fields.push(`email = $${paramIndex}`);\n                values.push(data.email);\n                paramIndex++;\n            }\n            if (data.role !== undefined) {\n                fields.push(`role = $${paramIndex}`);\n                values.push(data.role);\n                paramIndex++;\n            }\n            fields.push(`updated_at = NOW()`);\n            if (fields.length > 0) {\n                values.push(id);\n                await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n          UPDATE users\n          SET ${fields.join(\", \")}\n          WHERE id = $${paramIndex}\n        `, values);\n            }\n        }\n        // Update user preferences if provided\n        if (data.preferences || data.avatarUrl !== undefined) {\n            try {\n                // Check if user preferences exist\n                const prefExists = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.queryOne)(`SELECT 1 FROM user_preferences WHERE user_id = $1`, [\n                    id\n                ]);\n                if (prefExists) {\n                    // Update existing preferences\n                    const prefFields = [];\n                    const prefValues = [\n                        id\n                    ] // Start with user ID as first parameter\n                    ;\n                    let prefParamIndex = 2 // Start parameter index at 2 since user_id is $1\n                    ;\n                    // Handle preferences\n                    if (data.preferences) {\n                        if (data.preferences.language !== undefined) {\n                            prefFields.push(`language = $${prefParamIndex}`);\n                            prefValues.push(data.preferences.language || \"en\");\n                            prefParamIndex++;\n                        }\n                        if (data.preferences.theme !== undefined) {\n                            prefFields.push(`theme = $${prefParamIndex}`);\n                            prefValues.push(data.preferences.theme || \"system\");\n                            prefParamIndex++;\n                        }\n                        if (data.preferences.email_notifications !== undefined) {\n                            prefFields.push(`email_notifications = $${prefParamIndex}`);\n                            prefValues.push(data.preferences.email_notifications !== false);\n                            prefParamIndex++;\n                        }\n                        if (data.preferences.avatar_url !== undefined) {\n                            prefFields.push(`avatar_url = $${prefParamIndex}`);\n                            prefValues.push(data.preferences.avatar_url);\n                            prefParamIndex++;\n                        }\n                    }\n                    // Handle avatarUrl separately if provided directly\n                    if (data.avatarUrl !== undefined && !data.preferences?.avatar_url) {\n                        prefFields.push(`avatar_url = $${prefParamIndex}`);\n                        prefValues.push(data.avatarUrl);\n                        prefParamIndex++;\n                    }\n                    if (prefFields.length > 0) {\n                        prefFields.push(`updated_at = NOW()`);\n                        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n              UPDATE user_preferences\n              SET ${prefFields.join(\", \")}\n              WHERE user_id = $1\n              `, prefValues);\n                    }\n                } else {\n                    // Create new preferences with default values\n                    await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n            INSERT INTO user_preferences (\n              user_id, \n              language, \n              theme, \n              email_notifications,\n              avatar_url\n            )\n            VALUES ($1, $2, $3, $4, $5)\n            `, [\n                        id,\n                        data.preferences?.language || \"en\",\n                        data.preferences?.theme || \"system\",\n                        data.preferences?.email_notifications !== false,\n                        data.avatarUrl || data.preferences?.avatar_url || null\n                    ]);\n                }\n            } catch (error) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error updating user preferences:\", error);\n            // Continue execution to return the user even if preferences update fails\n            }\n        }\n        // Get the updated user\n        return getUserById(id);\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error updating user:\", error);\n        return null;\n    }\n}\nasync function updateLastLogin(id) {\n    try {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n      UPDATE users\n      SET last_login = NOW()\n      WHERE id = $1\n    `, [\n            id\n        ]);\n        return true;\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error updating last login:\", error);\n        return false;\n    }\n}\nasync function listUsers(options = {}) {\n    try {\n        const { role, limit = 10, offset = 0 } = options;\n        // Build the WHERE clause\n        let whereClause = \"\";\n        const params = [];\n        if (role) {\n            whereClause = \"WHERE u.role = $1\";\n            params.push(role);\n        }\n        // Get total count\n        const countResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.queryOne)(`\n      SELECT COUNT(*) as count\n      FROM users u\n      ${whereClause}\n    `, params);\n        const total = Number.parseInt(countResult?.count || \"0\", 10);\n        // Get users with pagination\n        const paginationParams = [\n            ...params,\n            limit,\n            offset\n        ];\n        const users = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n      SELECT u.*, \n             p.language, \n             p.theme, \n             p.email_notifications,\n             p.avatar_url\n      FROM users u\n      LEFT JOIN user_preferences p ON u.id = p.user_id\n      ${whereClause}\n      ORDER BY u.created_at DESC\n      LIMIT $${params.length + 1} OFFSET $${params.length + 2}\n    `, paginationParams);\n        // Format users with preferences\n        const formattedUsers = users.map((user)=>({\n                ...user,\n                avatarUrl: user.avatar_url || null,\n                preferences: {\n                    language: user.language || \"en\",\n                    theme: user.theme || \"system\",\n                    email_notifications: user.email_notifications !== false,\n                    avatar_url: user.avatar_url || null\n                }\n            }));\n        return {\n            users: formattedUsers,\n            total\n        };\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error listing users:\", error);\n        return {\n            users: [],\n            total: 0\n        };\n    }\n}\nasync function deleteUser(id) {\n    try {\n        const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n      DELETE FROM users\n      WHERE id = $1\n      RETURNING id\n    `, [\n            id\n        ]);\n        return result.length > 0;\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error deleting user:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2pDO1lBQ0Y7UUFFQSxPQUFPO1lBQUUrQixPQUFPQztZQUFnQk47UUFBTTtJQUN4QyxFQUFFLE9BQU96QixPQUFPO1FBQ2RwQiwrQ0FBTUEsQ0FBQ29CLEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3JDLE9BQU87WUFBRThCLE9BQU8sRUFBRTtZQUFFTCxPQUFPO1FBQUU7SUFDL0I7QUFDRjtBQUVPLGVBQWVRLFdBQVduRCxFQUFVO0lBQ3pDLElBQUk7UUFDRixNQUFNb0QsU0FBUyxNQUFNeEQsOENBQUtBLENBQ3hCLENBQUM7Ozs7SUFJSCxDQUFDLEVBQ0M7WUFBQ0k7U0FBRztRQUdOLE9BQU9vRCxPQUFPdkIsTUFBTSxHQUFHO0lBQ3pCLEVBQUUsT0FBT1gsT0FBTztRQUNkcEIsK0NBQU1BLENBQUNvQixLQUFLLENBQUMsd0JBQXdCQTtRQUNyQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsiL2FwcC9saWIvdXNlci1zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHF1ZXJ5LCBxdWVyeU9uZSB9IGZyb20gXCJAL2xpYi9kYlwiXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwiQC9saWIvbG9nZ2VyXCJcblxuLy8gTW9jayB1c2VycyBmb3IgZmFsbGJhY2sgd2hlbiBkYXRhYmFzZSBpcyBub3QgYXZhaWxhYmxlXG5jb25zdCBtb2NrVXNlcnMgPSB7XG4gIFwiMVwiOiB7XG4gICAgaWQ6IFwiMVwiLFxuICAgIGFkZHJlc3M6IFwiMHg4YmExZjEwOTU1MWJENDMyODAzMDEyNjQ1QWMxMzZkZGQ2NERCQTcyXCIsXG4gICAgbmFtZTogXCJBZG1pbiBVc2VyXCIsXG4gICAgZW1haWw6IFwiYWRtaW5AZ2lraS5qc1wiLFxuICAgIHJvbGU6IFwiYWRtaW5cIixcbiAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIGxhc3RfbG9naW46IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBhdmF0YXJVcmw6IG51bGwsXG4gICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgIGxhbmd1YWdlOiBcImVuXCIsXG4gICAgICB0aGVtZTogXCJzeXN0ZW1cIixcbiAgICAgIGVtYWlsX25vdGlmaWNhdGlvbnM6IHRydWUsXG4gICAgfSxcbiAgfSxcbn1cblxuLy8gVXBkYXRlIHRoZSBVc2VyIGludGVyZmFjZSB0byBpbmNsdWRlIGF2YXRhclVybFxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IHN0cmluZ1xuICBhZGRyZXNzOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nIHwgbnVsbFxuICBlbWFpbDogc3RyaW5nIHwgbnVsbFxuICByb2xlOiBcImFkbWluXCIgfCBcImVkaXRvclwiIHwgXCJ2aWV3ZXJcIlxuICBjcmVhdGVkX2F0OiBzdHJpbmdcbiAgdXBkYXRlZF9hdDogc3RyaW5nXG4gIGxhc3RfbG9naW46IHN0cmluZyB8IG51bGxcbiAgYXZhdGFyVXJsPzogc3RyaW5nIHwgbnVsbFxuICBwcmVmZXJlbmNlcz86IHtcbiAgICBsYW5ndWFnZTogc3RyaW5nXG4gICAgdGhlbWU6IHN0cmluZ1xuICAgIGVtYWlsX25vdGlmaWNhdGlvbnM6IGJvb2xlYW5cbiAgICBhdmF0YXJfdXJsPzogc3RyaW5nIHwgbnVsbFxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclByZWZlcmVuY2VzIHtcbiAgdXNlcl9pZDogc3RyaW5nXG4gIGxhbmd1YWdlOiBzdHJpbmdcbiAgdGhlbWU6IHN0cmluZ1xuICBlbWFpbF9ub3RpZmljYXRpb25zOiBib29sZWFuXG4gIGF2YXRhcl91cmw/OiBzdHJpbmcgfCBudWxsXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeU9uZTxVc2VyICYgVXNlclByZWZlcmVuY2VzPihcbiAgICAgIGBcbiAgICAgIFNFTEVDVCB1LiosIFxuICAgICAgICAgICAgIHAubGFuZ3VhZ2UsIFxuICAgICAgICAgICAgIHAudGhlbWUsIFxuICAgICAgICAgICAgIHAuZW1haWxfbm90aWZpY2F0aW9ucyxcbiAgICAgICAgICAgICBwLmF2YXRhcl91cmxcbiAgICAgIEZST00gdXNlcnMgdVxuICAgICAgTEVGVCBKT0lOIHVzZXJfcHJlZmVyZW5jZXMgcCBPTiB1LmlkID0gcC51c2VyX2lkXG4gICAgICBXSEVSRSB1LmlkID0gJDFcbiAgICBgLFxuICAgICAgW2lkXSxcbiAgICApXG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIG1vY2sgZGF0YSBpZiBkYXRhYmFzZSBxdWVyeSBmYWlscyBvciB1c2VyIG5vdCBmb3VuZFxuICAgICAgaWYgKG1vY2tVc2Vyc1tpZF0pIHtcbiAgICAgICAgcmV0dXJuIG1vY2tVc2Vyc1tpZF0gYXMgVXNlclxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgdGhlIHVzZXIgb2JqZWN0IHdpdGggcHJlZmVyZW5jZXNcbiAgICByZXR1cm4ge1xuICAgICAgLi4udXNlcixcbiAgICAgIGF2YXRhclVybDogdXNlci5hdmF0YXJfdXJsIHx8IG51bGwsXG4gICAgICBwcmVmZXJlbmNlczoge1xuICAgICAgICBsYW5ndWFnZTogdXNlci5sYW5ndWFnZSB8fCBcImVuXCIsXG4gICAgICAgIHRoZW1lOiB1c2VyLnRoZW1lIHx8IFwic3lzdGVtXCIsXG4gICAgICAgIGVtYWlsX25vdGlmaWNhdGlvbnM6IHVzZXIuZW1haWxfbm90aWZpY2F0aW9ucyAhPT0gZmFsc2UsXG4gICAgICAgIGF2YXRhcl91cmw6IHVzZXIuYXZhdGFyX3VybCB8fCBudWxsLFxuICAgICAgfSxcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOlwiLCBlcnJvciBhcyBFcnJvcilcblxuICAgIC8vIEZhbGxiYWNrIHRvIG1vY2sgZGF0YSBpZiBkYXRhYmFzZSBxdWVyeSBmYWlsc1xuICAgIGlmIChtb2NrVXNlcnNbaWRdKSB7XG4gICAgICByZXR1cm4gbW9ja1VzZXJzW2lkXSBhcyBVc2VyXG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5QWRkcmVzcyhhZGRyZXNzOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5T25lPFVzZXIgJiBVc2VyUHJlZmVyZW5jZXM+KFxuICAgICAgYFxuICAgICAgU0VMRUNUIHUuKiwgXG4gICAgICAgICAgICAgcC5sYW5ndWFnZSwgXG4gICAgICAgICAgICAgcC50aGVtZSwgXG4gICAgICAgICAgICAgcC5lbWFpbF9ub3RpZmljYXRpb25zLFxuICAgICAgICAgICAgIHAuYXZhdGFyX3VybFxuICAgICAgRlJPTSB1c2VycyB1XG4gICAgICBMRUZUIEpPSU4gdXNlcl9wcmVmZXJlbmNlcyBwIE9OIHUuaWQgPSBwLnVzZXJfaWRcbiAgICAgIFdIRVJFIExPV0VSKHUuYWRkcmVzcykgPSBMT1dFUigkMSlcbiAgICBgLFxuICAgICAgW2FkZHJlc3NdLFxuICAgIClcblxuICAgIGlmICghdXNlcikgcmV0dXJuIG51bGxcblxuICAgIC8vIEZvcm1hdCB0aGUgdXNlciBvYmplY3Qgd2l0aCBwcmVmZXJlbmNlc1xuICAgIHJldHVybiB7XG4gICAgICAuLi51c2VyLFxuICAgICAgYXZhdGFyVXJsOiB1c2VyLmF2YXRhcl91cmwgfHwgbnVsbCxcbiAgICAgIHByZWZlcmVuY2VzOiB7XG4gICAgICAgIGxhbmd1YWdlOiB1c2VyLmxhbmd1YWdlIHx8IFwiZW5cIixcbiAgICAgICAgdGhlbWU6IHVzZXIudGhlbWUgfHwgXCJzeXN0ZW1cIixcbiAgICAgICAgZW1haWxfbm90aWZpY2F0aW9uczogdXNlci5lbWFpbF9ub3RpZmljYXRpb25zICE9PSBmYWxzZSxcbiAgICAgICAgYXZhdGFyX3VybDogdXNlci5hdmF0YXJfdXJsIHx8IG51bGwsXG4gICAgICB9LFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHVzZXIgYnkgYWRkcmVzczpcIiwgZXJyb3IgYXMgRXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcih1c2VyRGF0YToge1xuICBhZGRyZXNzOiBzdHJpbmdcbiAgbmFtZT86IHN0cmluZyB8IG51bGxcbiAgZW1haWw/OiBzdHJpbmcgfCBudWxsXG4gIHJvbGU/OiBzdHJpbmdcbn0pOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gSW5zZXJ0IHRoZSB1c2VyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5T25lPFVzZXI+KFxuICAgICAgYFxuICAgICAgSU5TRVJUIElOVE8gdXNlcnMgKGFkZHJlc3MsIG5hbWUsIGVtYWlsLCByb2xlKVxuICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNClcbiAgICAgIFJFVFVSTklORyAqXG4gICAgYCxcbiAgICAgIFt1c2VyRGF0YS5hZGRyZXNzLCB1c2VyRGF0YS5uYW1lIHx8IG51bGwsIHVzZXJEYXRhLmVtYWlsIHx8IG51bGwsIHVzZXJEYXRhLnJvbGUgfHwgXCJ2aWV3ZXJcIl0sXG4gICAgKVxuXG4gICAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbFxuXG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgcHJlZmVyZW5jZXNcbiAgICBhd2FpdCBxdWVyeShcbiAgICAgIGBcbiAgICAgIElOU0VSVCBJTlRPIHVzZXJfcHJlZmVyZW5jZXMgKHVzZXJfaWQsIGxhbmd1YWdlLCB0aGVtZSwgZW1haWxfbm90aWZpY2F0aW9ucylcbiAgICAgIFZBTFVFUyAoJDEsICQyLCAkMywgJDQpXG4gICAgYCxcbiAgICAgIFt1c2VyLmlkLCBcImVuXCIsIFwic3lzdGVtXCIsIHRydWVdLFxuICAgIClcblxuICAgIC8vIEdldCB0aGUgY29tcGxldGUgdXNlciB3aXRoIHByZWZlcmVuY2VzXG4gICAgcmV0dXJuIGdldFVzZXJCeUlkKHVzZXIuaWQpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgY3JlYXRpbmcgdXNlcjpcIiwgZXJyb3IgYXMgRXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vLyBVcGRhdGUgdGhlIHVwZGF0ZVVzZXIgZnVuY3Rpb24gdG8gaGFuZGxlIGF2YXRhclVybFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXIoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxVc2VyPik6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBVcGRhdGUgdXNlciBkYXRhXG4gICAgaWYgKGRhdGEubmFtZSAhPT0gdW5kZWZpbmVkIHx8IGRhdGEuZW1haWwgIT09IHVuZGVmaW5lZCB8fCBkYXRhLnJvbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgZmllbGRzID0gW11cbiAgICAgIGNvbnN0IHZhbHVlcyA9IFtdXG4gICAgICBsZXQgcGFyYW1JbmRleCA9IDFcblxuICAgICAgaWYgKGRhdGEubmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpZWxkcy5wdXNoKGBuYW1lID0gJCR7cGFyYW1JbmRleH1gKVxuICAgICAgICB2YWx1ZXMucHVzaChkYXRhLm5hbWUpXG4gICAgICAgIHBhcmFtSW5kZXgrK1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5lbWFpbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpZWxkcy5wdXNoKGBlbWFpbCA9ICQke3BhcmFtSW5kZXh9YClcbiAgICAgICAgdmFsdWVzLnB1c2goZGF0YS5lbWFpbClcbiAgICAgICAgcGFyYW1JbmRleCsrXG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLnJvbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmaWVsZHMucHVzaChgcm9sZSA9ICQke3BhcmFtSW5kZXh9YClcbiAgICAgICAgdmFsdWVzLnB1c2goZGF0YS5yb2xlKVxuICAgICAgICBwYXJhbUluZGV4KytcbiAgICAgIH1cblxuICAgICAgZmllbGRzLnB1c2goYHVwZGF0ZWRfYXQgPSBOT1coKWApXG5cbiAgICAgIGlmIChmaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YWx1ZXMucHVzaChpZClcbiAgICAgICAgYXdhaXQgcXVlcnkoXG4gICAgICAgICAgYFxuICAgICAgICAgIFVQREFURSB1c2Vyc1xuICAgICAgICAgIFNFVCAke2ZpZWxkcy5qb2luKFwiLCBcIil9XG4gICAgICAgICAgV0hFUkUgaWQgPSAkJHtwYXJhbUluZGV4fVxuICAgICAgICBgLFxuICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB1c2VyIHByZWZlcmVuY2VzIGlmIHByb3ZpZGVkXG4gICAgaWYgKGRhdGEucHJlZmVyZW5jZXMgfHwgZGF0YS5hdmF0YXJVcmwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBwcmVmZXJlbmNlcyBleGlzdFxuICAgICAgICBjb25zdCBwcmVmRXhpc3RzID0gYXdhaXQgcXVlcnlPbmUoYFNFTEVDVCAxIEZST00gdXNlcl9wcmVmZXJlbmNlcyBXSEVSRSB1c2VyX2lkID0gJDFgLCBbaWRdKVxuICAgICAgICBcbiAgICAgICAgaWYgKHByZWZFeGlzdHMpIHtcbiAgICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcHJlZmVyZW5jZXNcbiAgICAgICAgICBjb25zdCBwcmVmRmllbGRzID0gW11cbiAgICAgICAgICBjb25zdCBwcmVmVmFsdWVzID0gW2lkXSAvLyBTdGFydCB3aXRoIHVzZXIgSUQgYXMgZmlyc3QgcGFyYW1ldGVyXG4gICAgICAgICAgbGV0IHByZWZQYXJhbUluZGV4ID0gMiAvLyBTdGFydCBwYXJhbWV0ZXIgaW5kZXggYXQgMiBzaW5jZSB1c2VyX2lkIGlzICQxXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSGFuZGxlIHByZWZlcmVuY2VzXG4gICAgICAgICAgaWYgKGRhdGEucHJlZmVyZW5jZXMpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLnByZWZlcmVuY2VzLmxhbmd1YWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgcHJlZkZpZWxkcy5wdXNoKGBsYW5ndWFnZSA9ICQke3ByZWZQYXJhbUluZGV4fWApXG4gICAgICAgICAgICAgIHByZWZWYWx1ZXMucHVzaChkYXRhLnByZWZlcmVuY2VzLmxhbmd1YWdlIHx8IFwiZW5cIilcbiAgICAgICAgICAgICAgcHJlZlBhcmFtSW5kZXgrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZGF0YS5wcmVmZXJlbmNlcy50aGVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHByZWZGaWVsZHMucHVzaChgdGhlbWUgPSAkJHtwcmVmUGFyYW1JbmRleH1gKVxuICAgICAgICAgICAgICBwcmVmVmFsdWVzLnB1c2goZGF0YS5wcmVmZXJlbmNlcy50aGVtZSB8fCBcInN5c3RlbVwiKVxuICAgICAgICAgICAgICBwcmVmUGFyYW1JbmRleCsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChkYXRhLnByZWZlcmVuY2VzLmVtYWlsX25vdGlmaWNhdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBwcmVmRmllbGRzLnB1c2goYGVtYWlsX25vdGlmaWNhdGlvbnMgPSAkJHtwcmVmUGFyYW1JbmRleH1gKVxuICAgICAgICAgICAgICBwcmVmVmFsdWVzLnB1c2goZGF0YS5wcmVmZXJlbmNlcy5lbWFpbF9ub3RpZmljYXRpb25zICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgcHJlZlBhcmFtSW5kZXgrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZGF0YS5wcmVmZXJlbmNlcy5hdmF0YXJfdXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgcHJlZkZpZWxkcy5wdXNoKGBhdmF0YXJfdXJsID0gJCR7cHJlZlBhcmFtSW5kZXh9YClcbiAgICAgICAgICAgICAgcHJlZlZhbHVlcy5wdXNoKGRhdGEucHJlZmVyZW5jZXMuYXZhdGFyX3VybClcbiAgICAgICAgICAgICAgcHJlZlBhcmFtSW5kZXgrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBIYW5kbGUgYXZhdGFyVXJsIHNlcGFyYXRlbHkgaWYgcHJvdmlkZWQgZGlyZWN0bHlcbiAgICAgICAgICBpZiAoZGF0YS5hdmF0YXJVcmwgIT09IHVuZGVmaW5lZCAmJiAhZGF0YS5wcmVmZXJlbmNlcz8uYXZhdGFyX3VybCkge1xuICAgICAgICAgICAgcHJlZkZpZWxkcy5wdXNoKGBhdmF0YXJfdXJsID0gJCR7cHJlZlBhcmFtSW5kZXh9YClcbiAgICAgICAgICAgIHByZWZWYWx1ZXMucHVzaChkYXRhLmF2YXRhclVybClcbiAgICAgICAgICAgIHByZWZQYXJhbUluZGV4KytcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHByZWZGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcHJlZkZpZWxkcy5wdXNoKGB1cGRhdGVkX2F0ID0gTk9XKClgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBhd2FpdCBxdWVyeShcbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICBVUERBVEUgdXNlcl9wcmVmZXJlbmNlc1xuICAgICAgICAgICAgICBTRVQgJHtwcmVmRmllbGRzLmpvaW4oXCIsIFwiKX1cbiAgICAgICAgICAgICAgV0hFUkUgdXNlcl9pZCA9ICQxXG4gICAgICAgICAgICAgIGAsXG4gICAgICAgICAgICAgIHByZWZWYWx1ZXNcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ3JlYXRlIG5ldyBwcmVmZXJlbmNlcyB3aXRoIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgICAgYXdhaXQgcXVlcnkoXG4gICAgICAgICAgICBgXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyB1c2VyX3ByZWZlcmVuY2VzIChcbiAgICAgICAgICAgICAgdXNlcl9pZCwgXG4gICAgICAgICAgICAgIGxhbmd1YWdlLCBcbiAgICAgICAgICAgICAgdGhlbWUsIFxuICAgICAgICAgICAgICBlbWFpbF9ub3RpZmljYXRpb25zLFxuICAgICAgICAgICAgICBhdmF0YXJfdXJsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCAkNSlcbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICBkYXRhLnByZWZlcmVuY2VzPy5sYW5ndWFnZSB8fCBcImVuXCIsXG4gICAgICAgICAgICAgIGRhdGEucHJlZmVyZW5jZXM/LnRoZW1lIHx8IFwic3lzdGVtXCIsXG4gICAgICAgICAgICAgIGRhdGEucHJlZmVyZW5jZXM/LmVtYWlsX25vdGlmaWNhdGlvbnMgIT09IGZhbHNlLFxuICAgICAgICAgICAgICBkYXRhLmF2YXRhclVybCB8fCBkYXRhLnByZWZlcmVuY2VzPy5hdmF0YXJfdXJsIHx8IG51bGwsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciB1cGRhdGluZyB1c2VyIHByZWZlcmVuY2VzOlwiLCBlcnJvcilcbiAgICAgICAgLy8gQ29udGludWUgZXhlY3V0aW9uIHRvIHJldHVybiB0aGUgdXNlciBldmVuIGlmIHByZWZlcmVuY2VzIHVwZGF0ZSBmYWlsc1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgdXBkYXRlZCB1c2VyXG4gICAgcmV0dXJuIGdldFVzZXJCeUlkKGlkKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHVzZXI6XCIsIGVycm9yIGFzIEVycm9yKVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUxhc3RMb2dpbihpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgcXVlcnkoXG4gICAgICBgXG4gICAgICBVUERBVEUgdXNlcnNcbiAgICAgIFNFVCBsYXN0X2xvZ2luID0gTk9XKClcbiAgICAgIFdIRVJFIGlkID0gJDFcbiAgICBgLFxuICAgICAgW2lkXSxcbiAgICApXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBsYXN0IGxvZ2luOlwiLCBlcnJvciBhcyBFcnJvcilcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdFVzZXJzKFxuICBvcHRpb25zOiB7XG4gICAgcm9sZT86IHN0cmluZ1xuICAgIGxpbWl0PzogbnVtYmVyXG4gICAgb2Zmc2V0PzogbnVtYmVyXG4gIH0gPSB7fSxcbik6IFByb21pc2U8eyB1c2VyczogVXNlcltdOyB0b3RhbDogbnVtYmVyIH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvbGUsIGxpbWl0ID0gMTAsIG9mZnNldCA9IDAgfSA9IG9wdGlvbnNcblxuICAgIC8vIEJ1aWxkIHRoZSBXSEVSRSBjbGF1c2VcbiAgICBsZXQgd2hlcmVDbGF1c2UgPSBcIlwiXG4gICAgY29uc3QgcGFyYW1zOiBhbnlbXSA9IFtdXG5cbiAgICBpZiAocm9sZSkge1xuICAgICAgd2hlcmVDbGF1c2UgPSBcIldIRVJFIHUucm9sZSA9ICQxXCJcbiAgICAgIHBhcmFtcy5wdXNoKHJvbGUpXG4gICAgfVxuXG4gICAgLy8gR2V0IHRvdGFsIGNvdW50XG4gICAgY29uc3QgY291bnRSZXN1bHQgPSBhd2FpdCBxdWVyeU9uZTx7IGNvdW50OiBzdHJpbmcgfT4oXG4gICAgICBgXG4gICAgICBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnRcbiAgICAgIEZST00gdXNlcnMgdVxuICAgICAgJHt3aGVyZUNsYXVzZX1cbiAgICBgLFxuICAgICAgcGFyYW1zLFxuICAgIClcblxuICAgIGNvbnN0IHRvdGFsID0gTnVtYmVyLnBhcnNlSW50KGNvdW50UmVzdWx0Py5jb3VudCB8fCBcIjBcIiwgMTApXG5cbiAgICAvLyBHZXQgdXNlcnMgd2l0aCBwYWdpbmF0aW9uXG4gICAgY29uc3QgcGFnaW5hdGlvblBhcmFtcyA9IFsuLi5wYXJhbXMsIGxpbWl0LCBvZmZzZXRdXG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBxdWVyeTxVc2VyICYgVXNlclByZWZlcmVuY2VzPihcbiAgICAgIGBcbiAgICAgIFNFTEVDVCB1LiosIFxuICAgICAgICAgICAgIHAubGFuZ3VhZ2UsIFxuICAgICAgICAgICAgIHAudGhlbWUsIFxuICAgICAgICAgICAgIHAuZW1haWxfbm90aWZpY2F0aW9ucyxcbiAgICAgICAgICAgICBwLmF2YXRhcl91cmxcbiAgICAgIEZST00gdXNlcnMgdVxuICAgICAgTEVGVCBKT0lOIHVzZXJfcHJlZmVyZW5jZXMgcCBPTiB1LmlkID0gcC51c2VyX2lkXG4gICAgICAke3doZXJlQ2xhdXNlfVxuICAgICAgT1JERVIgQlkgdS5jcmVhdGVkX2F0IERFU0NcbiAgICAgIExJTUlUICQke3BhcmFtcy5sZW5ndGggKyAxfSBPRkZTRVQgJCR7cGFyYW1zLmxlbmd0aCArIDJ9XG4gICAgYCxcbiAgICAgIHBhZ2luYXRpb25QYXJhbXMsXG4gICAgKVxuXG4gICAgLy8gRm9ybWF0IHVzZXJzIHdpdGggcHJlZmVyZW5jZXNcbiAgICBjb25zdCBmb3JtYXR0ZWRVc2VycyA9IHVzZXJzLm1hcCgodXNlcikgPT4gKHtcbiAgICAgIC4uLnVzZXIsXG4gICAgICBhdmF0YXJVcmw6IHVzZXIuYXZhdGFyX3VybCB8fCBudWxsLFxuICAgICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgICAgbGFuZ3VhZ2U6IHVzZXIubGFuZ3VhZ2UgfHwgXCJlblwiLFxuICAgICAgICB0aGVtZTogdXNlci50aGVtZSB8fCBcInN5c3RlbVwiLFxuICAgICAgICBlbWFpbF9ub3RpZmljYXRpb25zOiB1c2VyLmVtYWlsX25vdGlmaWNhdGlvbnMgIT09IGZhbHNlLFxuICAgICAgICBhdmF0YXJfdXJsOiB1c2VyLmF2YXRhcl91cmwgfHwgbnVsbCxcbiAgICAgIH0sXG4gICAgfSkpXG5cbiAgICByZXR1cm4geyB1c2VyczogZm9ybWF0dGVkVXNlcnMsIHRvdGFsIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBsaXN0aW5nIHVzZXJzOlwiLCBlcnJvciBhcyBFcnJvcilcbiAgICByZXR1cm4geyB1c2VyczogW10sIHRvdGFsOiAwIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVXNlcihpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoXG4gICAgICBgXG4gICAgICBERUxFVEUgRlJPTSB1c2Vyc1xuICAgICAgV0hFUkUgaWQgPSAkMVxuICAgICAgUkVUVVJOSU5HIGlkXG4gICAgYCxcbiAgICAgIFtpZF0sXG4gICAgKVxuXG4gICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgdXNlcjpcIiwgZXJyb3IgYXMgRXJyb3IpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJxdWVyeSIsInF1ZXJ5T25lIiwibG9nZ2VyIiwibW9ja1VzZXJzIiwiaWQiLCJhZGRyZXNzIiwibmFtZSIsImVtYWlsIiwicm9sZSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwibGFzdF9sb2dpbiIsImF2YXRhclVybCIsInByZWZlcmVuY2VzIiwibGFuZ3VhZ2UiLCJ0aGVtZSIsImVtYWlsX25vdGlmaWNhdGlvbnMiLCJnZXRVc2VyQnlJZCIsInVzZXIiLCJhdmF0YXJfdXJsIiwiZXJyb3IiLCJnZXRVc2VyQnlBZGRyZXNzIiwiY3JlYXRlVXNlciIsInVzZXJEYXRhIiwidXBkYXRlVXNlciIsImRhdGEiLCJ1bmRlZmluZWQiLCJmaWVsZHMiLCJ2YWx1ZXMiLCJwYXJhbUluZGV4IiwicHVzaCIsImxlbmd0aCIsImpvaW4iLCJwcmVmRXhpc3RzIiwicHJlZkZpZWxkcyIsInByZWZWYWx1ZXMiLCJwcmVmUGFyYW1JbmRleCIsInVwZGF0ZUxhc3RMb2dpbiIsImxpc3RVc2VycyIsIm9wdGlvbnMiLCJsaW1pdCIsIm9mZnNldCIsIndoZXJlQ2xhdXNlIiwicGFyYW1zIiwiY291bnRSZXN1bHQiLCJ0b3RhbCIsIk51bWJlciIsInBhcnNlSW50IiwiY291bnQiLCJwYWdpbmF0aW9uUGFyYW1zIiwidXNlcnMiLCJmb3JtYXR0ZWRVc2VycyIsIm1hcCIsImRlbGV0ZVVzZXIiLCJyZXN1bHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/user-service.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2Fapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2Fapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/me/route.ts */ \"(rsc)/./app/api/auth/me/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/me/route\",\n        pathname: \"/api/auth/me\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/me/route\"\n    },\n    resolvedPagePath: \"/app/app/api/auth/me/route.ts\",\n    nextConfigOutput,\n    userland: _app_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4yLjRfcmVhY3QtZG9tQDE5LjEuMF9yZWFjdEAxOS4xLjBfX3JlYWN0QDE5LjEuMC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbWUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ25CO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvYXBwL2FwcC9hcGkvYXV0aC9tZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvbWUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL21lXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL21lL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL2FwcC9hcHAvYXBpL2F1dGgvbWUvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2Fapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0","vendor-chunks/@neondatabase+serverless@1.0.0","vendor-chunks/jose@6.0.11"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2Fapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();